"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[179],{857:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n="[[stage(fragment)]]\nfn main([[location(0)]] inColor: vec3<f32>) -> [[location(0)]] vec4<f32> {\n    return vec4<f32>(inColor, 1.0);\n}\n"},250:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n="struct VSOut {\n    [[builtin(position)]] Position: vec4<f32>;\n    [[location(0)]] color: vec3<f32>;\n};\n\n[[block]] struct UBO {\n  modelViewProj: mat4x4<f32>;\n  primaryColor: vec4<f32>;\n  accentColor: vec4<f32>;\n};\n\n[[binding(0), group(0)]] var<uniform> uniforms: UBO;\n\n[[stage(vertex)]]\nfn main([[location(0)]] inPos: vec3<f32>,\n        [[location(1)]] inColor: vec3<f32>) -> VSOut {\n    var vsOut: VSOut;\n    vsOut.Position = uniforms.modelViewProj * vec4<f32>(inPos, 1.0);\n    vsOut.color = inColor;\n    return vsOut;\n}\n"},253:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createBuffer=t.resize=t.createContext=void 0,t.createContext=async function(e){const t=navigator.gpu;if(!t)throw new Error("WebGPU is not supported on this browser.");const r=await t.requestAdapter();if(null===r)throw new Error("unable to get adapter");const n=await r.requestDevice(),a=document.createElement("canvas");a.style.position="absolute",a.style.left="0",a.style.top="0",e.appendChild(a);const o=a.getContext("webgpu");if(null===o)throw new Error("unable to get gpu context");const i=e.clientWidth*devicePixelRatio,s=e.clientHeight*devicePixelRatio,d=o.getPreferredFormat(r),c=[i,s];a.style.width=`${e.offsetWidth}px`,a.style.height=`${e.offsetHeight}px`,a.width=i,a.height=s,o.configure({device:n,format:d,size:c});const l=n.createTexture({size:c,sampleCount:4,format:d,usage:GPUTextureUsage.RENDER_ATTACHMENT}),u=l.createView();return{canvas:a,container:e,adapter:r,device:n,context:o,queue:n.queue,presentationFormat:d,renderTarget:l,renderTargetView:u,sampleCount:4,width:i,height:s}},t.resize=function(e){const{container:t,width:r,height:n,canvas:a,presentationFormat:o,device:i,context:s}=e,d=t.clientWidth*devicePixelRatio,c=t.clientHeight*devicePixelRatio;if(d!==r||c!==n){e.renderTarget.destroy(),a.style.width=`${t.offsetWidth}px`,a.style.height=`${t.offsetHeight}px`,a.width=d,a.height=d,e.width=d,e.height=c;const r=[d,c];s.configure({device:i,format:o,size:r}),e.renderTarget=i.createTexture({size:r,sampleCount:e.sampleCount,format:o,usage:GPUTextureUsage.RENDER_ATTACHMENT}),e.renderTargetView=e.renderTarget.createView()}},t.createBuffer=function({device:e},t,r){const n=e.createBuffer({size:t.byteLength+3&-4,usage:r,mappedAtCreation:!0});return(t instanceof Uint16Array?new Uint16Array(n.getMappedRange()):new Float32Array(n.getMappedRange())).set(t),n.unmap(),n}},803:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(250)),o=n(r(857)),i=r(253);t.default={name:"webgpu-demo",start:async e=>{const t=await(0,i.createContext)(e),r=new Uint16Array([0,1,2]),n=new Float32Array([1,-1,0,-1,-1,0,0,1,0]),s=new Float32Array([1,0,0,0,1,0,0,0,1]),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,.9,.1,.3,1,.8,.2,.8,1]),c=(0,i.createBuffer)(t,n,GPUBufferUsage.VERTEX),l=(0,i.createBuffer)(t,s,GPUBufferUsage.VERTEX),u=(0,i.createBuffer)(t,r,GPUBufferUsage.INDEX),f=(0,i.createBuffer)(t,d,GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST),p=t.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}}]}),h=t.device.createBindGroup({layout:p,entries:[{binding:0,resource:{buffer:f}}]}),m=t.device.createPipelineLayout({bindGroupLayouts:[p]}),g=t.device.createShaderModule({code:a.default}),v=t.device.createShaderModule({code:o.default}),b=t.device.createRenderPipeline({layout:m,vertex:{module:g,entryPoint:"main",buffers:[{attributes:[{shaderLocation:0,offset:0,format:"float32x3"}],arrayStride:12,stepMode:"vertex"},{attributes:[{shaderLocation:1,offset:0,format:"float32x3"}],arrayStride:12,stepMode:"vertex"}]},fragment:{module:v,entryPoint:"main",targets:[{format:"bgra8unorm"}]},primitive:{frontFace:"cw",cullMode:"none",topology:"triangle-list"},multisample:{count:t.sampleCount}}),y=()=>{(0,i.resize)(t);const e=t.device.createCommandEncoder(),r=e.beginRenderPass({colorAttachments:[{view:t.renderTargetView,resolveTarget:t.context.getCurrentTexture().createView(),loadValue:{r:0,g:0,b:0,a:1},storeOp:"store"}]});r.setPipeline(b),r.setVertexBuffer(0,c),r.setVertexBuffer(1,l),r.setBindGroup(0,h),r.setIndexBuffer(u,"uint16"),r.drawIndexed(3),r.endPass(),t.device.queue.submit([e.finish()]),requestAnimationFrame(y)};y()}}},323:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(51)),o=n(r(79)),i=n(r(803)),s=n(r(280)),d=r(796);a.default.setup((0,o.default)()),a.default.createStyleSheet(s.default).attach();const{classes:c}=a.default.createStyleSheet(d.styles).attach(),l=[i.default],u=document.createElement("div");u.className=c.wrapper,document.body.appendChild(u);const f=document.createElement("div");f.className=c.demoList,u.appendChild(f);for(const e of l){const t=document.createElement("a");t.href=`#${e.name}`,t.innerHTML=e.name,t.classList.add(c.link),e.name===location.hash.trim().substr(1)&&t.classList.add(c.linkActive),f.appendChild(t)}const p=document.createElement("div");if(p.className=c.container,u.appendChild(p),0!==location.hash.trim().length)(async()=>{try{const e=location.hash.substr(1),t=l.find((t=>t.name===e));if(void 0===t)throw new Error("unable to find the demo");await t.start(p)}catch(e){const t=document.createElement("div");t.innerHTML=e.message,t.className=c.err,p.appendChild(t)}})();else{const e=document.createElement("div");e.innerHTML="â—„ Select demo from list",e.className=c.hint,p.appendChild(e)}window.onhashchange=()=>{location.reload()}},280:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={"@global":{"html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video":{margin:"0",padding:"0",border:"0",fontSize:"100%",font:"inherit",verticalAlign:"baseline"},"article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section":{display:"block"},body:{lineHeight:1},"ol, ul":{listStyle:"none"},"blockquote, q":{quotes:"none"},"blockquote:before, blockquote:after, q:before, q:after":{content:"none"},table:{borderCollapse:"collapse",borderSpacing:0}}}},796:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0,t.styles={"@global":{"html, body":{width:"100%",height:"100%","font-family":"Geneva, Verdana, sans-serif",fontSize:16}},wrapper:{width:"100%",height:"100%",display:"grid",gridTemplateColumns:"300px 1fr"},demoList:{overflow:"auto",borderRight:"1px solid #eee"},hint:{padding:16,color:"#060"},err:{padding:16,color:"#600"},container:{position:"relative"},link:{display:"block",padding:16,textDecoration:"underlined","&:hover":{backgroundColor:"#f5f5f5"},"&, &:visited, &:hover, &:active":{color:"#089"}},linkActive:{"&, &:visited, &:hover, &:active":{color:"#600"}}}}},e=>{e.O(0,[79],(()=>(323,e(e.s=323)))),e.O()}]);