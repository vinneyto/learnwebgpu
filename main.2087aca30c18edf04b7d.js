"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[179],{857:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n="[[stage(fragment)]]\nfn main([[location(0)]] inColor: vec3<f32>) -> [[location(0)]] vec4<f32> {\n    return vec4<f32>(inColor, 1.0);\n}\n"},250:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n="struct VSOut {\n    [[builtin(position)]] Position: vec4<f32>;\n    [[location(0)]] color: vec3<f32>;\n};\n\n[[block]] struct UBO {\n  modelViewProj: mat4x4<f32>;\n  primaryColor: vec4<f32>;\n  accentColor: vec4<f32>;\n};\n\n[[binding(0), group(0)]] var<uniform> uniforms: UBO;\n\n[[stage(vertex)]]\nfn main([[location(0)]] inPos: vec3<f32>,\n        [[location(1)]] inColor: vec3<f32>) -> VSOut {\n    var vsOut: VSOut;\n    vsOut.Position = uniforms.modelViewProj * vec4<f32>(inPos, 1.0);\n    vsOut.color = inColor;\n    return vsOut;\n}\n"},274:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n="[[stage(fragment)]]\nfn main([[location(0)]] uv: vec2<f32>) -> [[location(0)]] vec4<f32> {\n    return vec4<f32>(uv.x, uv.y, 0.0, 1.0);\n}\n"},736:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n="[[block]] struct Uniforms {\n  modelViewProjectionMatrix : mat4x4<f32>;\n};\n\n[[binding(0), group(0)]] var<uniform> uniforms : Uniforms;\n\nstruct VertexOutput {\n  [[builtin(position)]] Position : vec4<f32>;\n  [[location(0)]] uv: vec2<f32>;\n};\n\n[[stage(vertex)]]\nfn main([[location(0)]] position : vec4<f32>,\n        [[location(1)]] uv : vec2<f32>) -> VertexOutput {\n  var output : VertexOutput;\n  output.Position = uniforms.modelViewProjectionMatrix * position;\n  output.uv = uv;\n  return output;\n}\n"},496:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n="[[stage(fragment)]]\nfn main([[location(0)]] uv: vec2<f32>) -> [[location(0)]] vec4<f32> {\n    return vec4<f32>(1.0, 0.0, 0.0, 1.0);\n}\n"},803:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(250)),o=n(r(857)),i=r(342);t.default={name:"triangle",start:async e=>{const t=await(0,i.createContext)(e),r=new Uint16Array([0,1,2]),n=new Float32Array([1,-1,0,-1,-1,0,0,1,0]),s=new Float32Array([1,0,0,0,1,0,0,0,1]),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,.9,.1,.3,1,.8,.2,.8,1]),u=(0,i.createBuffer)(t,n,GPUBufferUsage.VERTEX),d=(0,i.createBuffer)(t,s,GPUBufferUsage.VERTEX),l=(0,i.createBuffer)(t,r,GPUBufferUsage.INDEX),f=(0,i.createBuffer)(t,c,GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST),m=t.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}}]}),p=t.device.createBindGroup({layout:m,entries:[{binding:0,resource:{buffer:f}}]}),h=t.device.createPipelineLayout({bindGroupLayouts:[m]}),g=t.device.createShaderModule({code:a.default}),v=t.device.createShaderModule({code:o.default}),b=t.device.createRenderPipeline({layout:h,vertex:{module:g,entryPoint:"main",buffers:[{attributes:[{shaderLocation:0,offset:0,format:"float32x3"}],arrayStride:12,stepMode:"vertex"},{attributes:[{shaderLocation:1,offset:0,format:"float32x3"}],arrayStride:12,stepMode:"vertex"}]},fragment:{module:v,entryPoint:"main",targets:[{format:"bgra8unorm"}]},primitive:{frontFace:"cw",cullMode:"none",topology:"triangle-list"},multisample:{count:t.sampleCount}}),y=()=>{(0,i.resize)(t);const e=t.device.createCommandEncoder(),r=e.beginRenderPass({colorAttachments:[{view:t.renderTargetView,resolveTarget:t.context.getCurrentTexture().createView(),loadValue:{r:0,g:0,b:0,a:1},storeOp:"store"}]});r.setPipeline(b),r.setVertexBuffer(0,u),r.setVertexBuffer(1,d),r.setBindGroup(0,p),r.setIndexBuffer(l,"uint16"),r.drawIndexed(3),r.endPass(),t.device.queue.submit([e.finish()]),requestAnimationFrame(y)};y()}}},93:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(736)),o=n(r(274)),i=n(r(496)),s=r(342),c=r(992),u=r(659);function d(e,t=0,r=0){const n=(0,s.createProjectionMatrix)(e),a=(0,s.createDemoModelMatrix)(t,r),o=u.mat4.create();return u.mat4.multiply(o,n,a),o}function l(e,t){const r=e.device.createBuffer({size:64,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});return[r,e.device.createBindGroup({layout:t.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:r}}]})]}function f(e,t){return e.device.createRenderPipeline({vertex:{module:e.device.createShaderModule({code:a.default}),entryPoint:"main",buffers:[{arrayStride:12,attributes:[{shaderLocation:0,offset:0,format:"float32x3"}]},{arrayStride:8,attributes:[{shaderLocation:1,offset:0,format:"float32x2"}]}]},fragment:{module:e.device.createShaderModule({code:t}),entryPoint:"main",targets:[{format:e.presentationFormat}]},primitive:{topology:"triangle-list",cullMode:"back",frontFace:"ccw"},depthStencil:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus"},multisample:{count:e.sampleCount}})}t.default={name:"cube",start:async e=>{const t=await(0,s.createContext)(e),{positions:r,uvs:n,cells:a}=(0,c.cube)(),u=(0,s.createBuffer)(t,r,GPUBufferUsage.VERTEX),m=(0,s.createBuffer)(t,n,GPUBufferUsage.VERTEX),p=(0,s.createBuffer)(t,new Uint16Array(a),GPUBufferUsage.INDEX),h=f(t,o.default),g=f(t,i.default),[v,b]=l(t,h),[y,x]=l(t,g),w=()=>{(0,s.resize)(t);const e=d(t,-2),r=d(t,2);t.queue.writeBuffer(v,0,e.buffer,e.byteOffset,e.byteLength),t.queue.writeBuffer(y,0,r.buffer,r.byteOffset,r.byteLength);const n=t.device.createCommandEncoder(),o=n.beginRenderPass({colorAttachments:[{view:t.renderTargetView,resolveTarget:t.context.getCurrentTexture().createView(),loadValue:{r:0,g:0,b:0,a:1},storeOp:"store"}],depthStencilAttachment:{view:t.depthTextureView,depthLoadValue:1,depthStoreOp:"store",stencilLoadValue:0,stencilStoreOp:"store"}});o.setVertexBuffer(0,u),o.setVertexBuffer(1,m),o.setIndexBuffer(p,"uint16"),o.setPipeline(h),o.setBindGroup(0,b),o.drawIndexed(a.length),o.setPipeline(g),o.setBindGroup(0,x),o.drawIndexed(a.length),o.endPass(),t.device.queue.submit([n.finish()]),requestAnimationFrame(w)};requestAnimationFrame(w)}}},342:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDemoModelMatrix=t.createProjectionMatrix=t.createBuffer=t.resize=t.createContext=void 0;const n=r(659);t.createContext=async function(e){const t=navigator.gpu;if(!t)throw new Error("WebGPU is not supported on this browser.");const r=await t.requestAdapter();if(null===r)throw new Error("unable to get adapter");const n=await r.requestDevice(),a=document.createElement("canvas");a.style.position="absolute",a.style.left="0",a.style.top="0",e.appendChild(a);const o=a.getContext("webgpu");if(null===o)throw new Error("unable to get gpu context");const i=e.clientWidth*devicePixelRatio,s=e.clientHeight*devicePixelRatio,c=o.getPreferredFormat(r),u=[i,s];a.style.width=`${e.offsetWidth}px`,a.style.height=`${e.offsetHeight}px`,a.width=i,a.height=s,o.configure({device:n,format:c,size:u});const d=n.createTexture({size:u,sampleCount:4,format:c,usage:GPUTextureUsage.RENDER_ATTACHMENT}),l=d.createView(),f=n.createTexture({size:u,sampleCount:4,format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT}),m=f.createView();return{canvas:a,container:e,adapter:r,device:n,context:o,queue:n.queue,presentationFormat:c,renderTarget:d,renderTargetView:l,depthTexture:f,depthTextureView:m,sampleCount:4,width:i,height:s}},t.resize=function(e){const{container:t,width:r,height:n,canvas:a,presentationFormat:o,device:i,context:s}=e,c=t.clientWidth*devicePixelRatio,u=t.clientHeight*devicePixelRatio;if(c!==r||u!==n){e.renderTarget.destroy(),e.depthTexture.destroy(),a.style.width=`${t.offsetWidth}px`,a.style.height=`${t.offsetHeight}px`,a.width=c,a.height=c,e.width=c,e.height=u;const r=[c,u];s.configure({device:i,format:o,size:r}),e.renderTarget=i.createTexture({size:r,sampleCount:e.sampleCount,format:o,usage:GPUTextureUsage.RENDER_ATTACHMENT}),e.renderTargetView=e.renderTarget.createView(),e.depthTexture=i.createTexture({size:r,sampleCount:e.sampleCount,format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT}),e.depthTextureView=e.depthTexture.createView()}},t.createBuffer=function({device:e},t,r){const n=e.createBuffer({size:t.byteLength+3&-4,usage:r,mappedAtCreation:!0});return(t instanceof Uint16Array?new Uint16Array(n.getMappedRange()):new Float32Array(n.getMappedRange())).set(t),n.unmap(),n},t.createProjectionMatrix=function(e){const t=e.width/e.height,r=n.mat4.create();return n.mat4.perspective(r,2*Math.PI/5,t,.1,100),r},t.createDemoModelMatrix=function(e=0,t=0){const r=n.mat4.create();n.mat4.translate(r,r,n.vec3.fromValues(e,t,-4));const a=Date.now()/1e3;return n.mat4.rotate(r,r,1,n.vec3.fromValues(Math.sin(a),Math.cos(a),0)),r}},323:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(51)),o=n(r(79)),i=n(r(803)),s=n(r(93)),c=n(r(280)),u=r(796);a.default.setup((0,o.default)()),a.default.createStyleSheet(c.default).attach();const{classes:d}=a.default.createStyleSheet(u.styles).attach(),l=[i.default,s.default],f=document.createElement("div");f.className=d.wrapper,document.body.appendChild(f);const m=document.createElement("div");m.className=d.demoList,f.appendChild(m);for(const e of l){const t=document.createElement("div");t.classList.add(d.demoItem),m.appendChild(t);const r=document.createElement("a");r.href=`#${e.name}`,r.innerHTML=e.name,r.classList.add(d.demoItemLink),e.name===location.hash.trim().substr(1)&&r.classList.add(d.demoItemLinkActive),t.appendChild(r)}const p=document.createElement("div");if(p.className=d.container,f.appendChild(p),0!==location.hash.trim().length)(async()=>{try{const e=location.hash.substr(1),t=l.find((t=>t.name===e));if(void 0===t)throw new Error("unable to find the demo");await t.start(p)}catch(e){const t=document.createElement("div");throw t.innerHTML=e.message,t.className=d.err,p.appendChild(t),e}})();else{const e=document.createElement("div");e.innerHTML="â—„ Select demo from list",e.className=d.hint,p.appendChild(e)}window.onhashchange=()=>{location.reload()}},280:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={"@global":{"html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video":{margin:"0",padding:"0",border:"0",fontSize:"100%",font:"inherit",verticalAlign:"baseline"},"article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section":{display:"block"},body:{lineHeight:1},"ol, ul":{listStyle:"none"},"blockquote, q":{quotes:"none"},"blockquote:before, blockquote:after, q:before, q:after":{content:"none"},table:{borderCollapse:"collapse",borderSpacing:0}}}},796:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0,t.styles={"@global":{"html, body":{width:"100%",height:"100%","font-family":"Geneva, Verdana, sans-serif",fontSize:16}},wrapper:{width:"100%",height:"100%",display:"grid",gridTemplateColumns:"300px 1fr"},demoList:{overflow:"auto",borderRight:"1px solid #eee"},hint:{padding:16,color:"#060"},err:{padding:16,color:"#600"},container:{position:"relative"},demoItem:{display:"block",padding:16},demoItemLink:{textDecoration:"none","&:hover":{textDecoration:"underline"},"&, &:visited, &:hover, &:active":{color:"#089"}},demoItemLinkActive:{"&, &:visited, &:hover, &:active":{color:"#600"}}}}},e=>{e.O(0,[22],(()=>(323,e(e.s=323)))),e.O()}]);